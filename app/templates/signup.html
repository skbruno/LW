{% extends "base.html" %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">
      
      <div class="card shadow-lg">
        <div class="card-body p-4 p-md-5">
          
          <h2 class="text-center mb-4 fw-bold">Crie sua Conta</h2>
          
          <form method="POST">
            
            <h5 class="mb-3">Dados de Acesso</h5>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="login" class="form-label">Usuário</label>
                <input type="text" class="form-control" id="login" name="login" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="senha" class="form-label">Senha</label>
                <input type="password" class="form-control" id="senha" name="senha" required>
              </div>
            </div>

            <div class="mb-3">
              <label for="tipo_usuario" class="form-label">Tipo de Usuário</label>
              <select class="form-select" name="tipo_usuario" id="tipo_usuario" onchange="toggleForm()" required>
                <option value="" disabled selected>Selecione uma opção...</option>
                <option value="1">Sou Cliente</option>
                <option value="2">Sou Fornecedor</option>
              </select>
            </div>

            <hr class="my-4">

            <h5 class="mb-3">Contato e Endereço</h5>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="email" class="form-label">E-mail</label>
                <input type="email" class="form-control" id="email" name="email" required>
              </div>
              <div class="col-md-6 mb-3">
                <label for="telefone" class="form-label">Telefone</label>
                <input type="text" class="form-control" id="telefone" name="telefone" placeholder="(XX) XXXXX-XXXX">
              </div>
            </div>
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="cep" class="form-label">CEP</label>
                <input type="text" class="form-control" id="cep" name="cep">
              </div>
              <div class="col-md-2 mb-3">
                <label for="numero" class="form-label">Número</label>
                <input type="text" class="form-control" id="numero" name="numero">
              </div>
              <div class="col-md-6 mb-3">
                <label for="pontoreferencia" class="form-label">Ponto de Referência</label>
                <input type="text" class="form-control" id="pontoreferencia" name="pontoreferencia">
              </div>
            </div>

            <div id="cliente_form" style="display:none;">
              <hr class="my-4">
              <h5 class="mb-3">Dados do Cliente</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nome_cliente" class="form-label">Nome Completo</label>
                  <input type="text" class="form-control" id="nome_cliente" name="nome_cliente">
                </div>
                <div class="col-md-6 mb-3">
                  <label for="cpf" class="form-label">CPF</label>
                  <input type="text" class="form-control" id="cpf" name="cpf">
                </div>
                <div class="col-md-6 mb-3">
                  <label for="data_nascimento" class="form-label">Data de Nascimento</label>
                  <input type="date" class="form-control" id="data_nascimento" name="data_nascimento">
                </div>
              </div>
            </div>
            
            <div id="fornecedor_form" style="display:none;">
              <hr class="my-4">
              <h5 class="mb-3">Dados do Fornecedor</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nome_fornecedor" class="form-label">Nome da Empresa</label>
                  <input type="text" class="form-control" id="nome_fornecedor" name="nome_fornecedor">
                </div>
                <div class="col-md-6 mb-3">
                  <label for="cnpj" class="form-label">CNPJ</label>
                  <input type="text" class="form-control" id="cnpj" name="cnpj">
                </div>
                <div class="col-md-6 mb-3">
                  <label for="atualizacao_servico" class="form-label">Data de Atualização de Serviço</label>
                  <input type="date" class="form-control" id="atualizacao_servico" name="atualizacao_servico">
                </div>
              </div>
            </div>

            <div class="d-grid mt-4">
              <button class="btn btn-warning btn-lg fw-bold" type="submit">Cadastrar</button>
            </div>

          </form>
        </div>
        <div class="card-footer text-center py-3">
          <div class="small">
            Já tem uma conta? <a href="{{ url_for('auth.login') }}">Faça login</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    
    const tipoUsuarioSelect = document.getElementById('tipo_usuario');
    const clienteForm = document.getElementById('cliente_form');
    const fornecedorForm = document.getElementById('fornecedor_form');
    function toggleForm() {
      const tipo = tipoUsuarioSelect.value;
      clienteForm.style.display = tipo === '1' ? 'block' : 'none';
      fornecedorForm.style.display = tipo === '2' ? 'block' : 'none';
    }

    tipoUsuarioSelect.addEventListener('change', toggleForm);

    toggleForm();
  });
</script>
{% endblock %}